---
layout: post
title: 零基础linux基础系列教程10-过滤器
categories:
- linux使用
- 技术
- 教程
tags:
- linux，linux教程，linux操作系统
published: true
comments: true
---
<p><h1><b>过滤器</b></h1>
Linux的哲学是每个工具做且只做一个事情，在linux的上下文中，过滤器是一个接收并转换文本数据的程序，过滤器从文件或其他程序中接收数据，做某些转换，最后数据以某种格式进行输出。</p>

<p>我使用如下文件演示如何使用过滤器：</p>

<p>[root@pidora ~]# cat mysampledata.txt</p>

<p>Fred apples 20</p>

<p>Susy oranges 5</p>

<p>Mark watermellons 12</p>

<p>Robert pears 4</p>

<p>Terry oranges 9</p>

<p>Lisa peaches 7</p>

<p>Susy oranges 12</p>

<p>Mark grapes 39</p>

<p>Anne mangoes 7</p>

<p>Greg pineapples 3</p>

<p>Oliver rockmellons 2</p>

<p>Betty limes 14</p>

<p>&nbsp;</p>

<p>&nbsp;
<h1><b>head过滤器命令</b></h1>
head是一个输出输入行中的最前面几行的程序，默认情况下，它输出10行，我们可以通过命令行选项修改输出的行数。其使用方法如下：</p>

<p>head [-number of lines to print] [path]</p>

<p>&nbsp;</p>

<p>如：</p>

<p>[root@pidora ~]#head mysampledata.txt</p>

<p>Fred apples 20</p>

<p>Susy oranges 5</p>

<p>Mark watermellons 12</p>

<p>Robert pears 4</p>

<p>Terry oranges 9</p>

<p>Lisa peaches 7</p>

<p>Susy oranges 12</p>

<p>Mark grapes 39</p>

<p>Anne mangoes 7</p>

<p>Greg pineapples 3</p>

<p>&nbsp;</p>

<p>上面的例子输出了默认的10行，我们可以修改这个行为，如输出4行：</p>

<p>&nbsp;</p>

<p>[root@pidora ~]#head -4 mysampledata.txt</p>

<p>Fred apples 20</p>

<p>Susy oranges 5</p>

<p>Mark watermellons 12</p>

<p>Robert pears 4</p>

<p>&nbsp;
<h1><b>tail过滤器命令</b></h1>
&nbsp;</p>

<p>tail命令与head命令相反，它输出输入行中的末尾几行，默认10行，使用方法如下：</p>

<p>tail [-number of lines to print] [path]</p>

<p>如：</p>

<p>[root@pidora ~]#tail mysampledata.txt</p>

<p>Mark watermellons 12</p>

<p>Robert pears 4</p>

<p>Terry oranges 9</p>

<p>Lisa peaches 7</p>

<p>Susy oranges 12</p>

<p>Mark grapes 39</p>

<p>Anne mangoes 7</p>

<p>Greg pineapples 3</p>

<p>Oliver rockmellons 2</p>

<p>Betty limes 14</p>

<p>&nbsp;</p>

<p>可以使用命令行参数修改行为，如输出3行：</p>

<p>[root@pidora ~]#tail -3 mysampledata.txt</p>

<p>Greg pineapples 3</p>

<p>Oliver rockmellons 2</p>

<p>Betty limes 14</p>

<p>&nbsp;
<h1><b>sort过滤器命令</b></h1>
sort命令将会对输入行进行排序，默认情况下是按字母顺序进行排序，可以通过命令行选项进行改变，具体大家参考man手册。其使用方法如下：</p>

<p>&nbsp;</p>

<p>sort [-options] [path]</p>

<p>如：</p>

<p>[root@pidora ~]#sort mysampledata.txt</p>

<p>Anne mangoes 7</p>

<p>Betty limes 14</p>

<p>Fred apples 20</p>

<p>Greg pineapples 3</p>

<p>Lisa peaches 7</p>

<p>Mark grapes 39</p>

<p>Mark watermellons 12</p>

<p>Oliver rockmellons 2</p>

<p>Robert pears 4</p>

<p>Susy oranges 12</p>

<p>Susy oranges 5</p>

<p>Terry oranges 9</p>

<p>&nbsp;
<h1><b>nl过滤器命令</b></h1>
nl 命令对每个输入行增加一个行号，使用方法如下：</p>

<p>nl [-options] [path]</p>

<p>如：</p>

<p>[root@pidora ~]#nl mysampledata.txt</p>

<p>1 Fred apples 20</p>

<p>2 Susy oranges 5</p>

<p>3 Mark watermellons 12</p>

<p>4 Robert pears 4</p>

<p>5 Terry oranges 9</p>

<p>6 Lisa peaches 7</p>

<p>7 Susy oranges 12</p>

<p>8 Mark grapes 39</p>

<p>9 Anne mangoes 7</p>

<p>10 Greg pineapples 3</p>

<p>11 Oliver rockmellons 2</p>

<p>12 Betty limes 14</p>

<p>&nbsp;</p>

<p>通过指定命令行选项可以修改它的一些行为，如：</p>

<p>&nbsp;</p>

<p>[root@pidora ~]#nl -s '. ' -w 10 mysampledata.txt</p>

<p>1. Fred apples 20</p>

<p>2. Susy oranges 5</p>

<p>3. Mark watermellons 12</p>

<p>4. Robert pears 4</p>

<p>5. Terry oranges 9</p>

<p>6. Lisa peaches 7</p>

<p>7. Susy oranges 12</p>

<p>8. Mark grapes 39</p>

<p>9. Anne mangoes 7</p>

<p>10. Greg pineapples 3</p>

<p>11. Oliver rockmellons 2</p>

<p>12. Betty limes 14</p>

<p>&nbsp;</p>

<p>上面的列子中我们使用了两个命令行选项，-s、-w。-s选项指定你需要在行号后面增加什么字符串。-w选择指定你需要在行号前面增加多少个空格。
<h1><b>wc过滤器命令</b></h1>
wc命令可以统计输入的行数、单词数、字符数，使用方法如下：</p>

<p>&nbsp;</p>

<p>wc [-options] [path]</p>

<p>如：</p>

<p>[root@pidora ~]#wc mysampledata.txt</p>

<p>12 36 195 mysampledata.txt</p>

<p>第一个数字为行数，第二个数字为单词数，第三个数字为字符数。</p>

<p>&nbsp;</p>

<p>有时你只需要一个值，通过指定命令行选项可以达成。 -l 选项只输出行数，-w 选项只输出单词数，-m 选项只输出字符数。如：</p>

<p>[root@pidora ~]#wc -l mysampledata.txt</p>

<p>12 mysampledata.txt</p>

<p>&nbsp;</p>

<p>[root@pidora ~]#wc -lw mysampledata.txt</p>

<p>12 36 mysampledata.txt</p>

<p>&nbsp;
<h1><b>cut过滤器命令</b></h1>
如果你的输入行由多个字段组成，cut 命令可以只输出其中的某个域，使用方法如下：</p>

<p>&nbsp;</p>

<p>cut [-options] [path]</p>

<p>&nbsp;</p>

<p>如：</p>

<p>[root@pidora ~]#cut -f 1 -d ' ' mysampledata.txt</p>

<p>Fred</p>

<p>Susy</p>

<p>Mark</p>

<p>Robert</p>

<p>Terry</p>

<p>Lisa</p>

<p>Susy</p>

<p>Mark</p>

<p>Anne</p>

<p>Greg</p>

<p>Oliver</p>

<p>Betty</p>

<p>&nbsp;</p>

<p>cut 默认使用tab字符作为域的分隔符，在我们的例子文件中使用的是空格分隔符。所以我们需要通过-d 选项告诉cut 命令我们所使用的分隔符。分隔符可以是任何字符。-f 选项告诉cut 命令我们想要哪个字段，可以指定多个字段，如想要第一、第二个字段：</p>

<p>[root@pidora ~]#cut -f 1,2 -d ' ' mysampledata.txt</p>

<p>Fred apples</p>

<p>Susy oranges</p>

<p>Mark watermellons</p>

<p>Robert pears</p>

<p>Terry oranges</p>

<p>Lisa peaches</p>

<p>Susy oranges</p>

<p>Mark grapes</p>

<p>Anne mangoes</p>

<p>Greg pineapples</p>

<p>Oliver rockmellons</p>

<p>Betty limes</p>

<p>&nbsp;
<h1><b>sed过滤器命令</b></h1>
sed 命令可以对我们的输入进行搜索的替换。其基本使用方法如下：</p>

<p>&nbsp;</p>

<p>sed &lt;expression&gt; [path]</p>

<p>&nbsp;</p>

<p>一个基本的表达式（expression）是如下的格式：</p>

<p>s/search/replace/g</p>

<p>开始的s代表我们想要完成的操作，s 代表搜索和替换，也有其他的选项（参考man) 。随后的两个/之间的search代表我们想要搜索什么字符串，接下来的两个/之间的replace代表我们想要使用什么字符串替换被搜索的字符串。最后的g是可选的，代表是否是全局搜索替换，如果没有g，那么搜索替换只进行一次匹配，如果有g，哪个整个文件都会进行搜索替换。如：</p>

<p>[root@pidora ~]#sed 's/oranges/bananas/g' mysampledata.txt</p>

<p>Fred apples 20</p>

<p>Susy bananas 5</p>

<p>Mark watermellons 12</p>

<p>Robert pears 4</p>

<p>Terry oranges 9</p>

<p>Lisa peaches 7</p>

<p>Susy bananas 12</p>

<p>Mark grapes 39</p>

<p>Anne mangoes 7</p>

<p>Greg pineapples 3</p>

<p>Oliver rockmellons 2</p>

<p>Betty limes 14</p>

<p>&nbsp;
<h1><b>uniq过滤器命令</b></h1>
&nbsp;</p>

<p>uniq 命令移除输入中的重复的行，一个限制是重复行必须是相邻的。使用方法如下：</p>

<p>uniq [options] [path]</p>

<p>如文件中包含如下重复行：</p>

<p>[root@pidora ~]#cat mysampledata.txt</p>

<p>Fred apples 20</p>

<p>Susy oranges 5</p>

<p>Susy oranges 5</p>

<p>Susy oranges 5</p>

<p>Mark watermellons 12</p>

<p>Robert pears 4</p>

<p>Terry oranges 9</p>

<p>Lisa peaches 7</p>

<p>Susy oranges 12</p>

<p>Mark grapes 39</p>

<p>Mark grapes 39</p>

<p>Anne mangoes 7</p>

<p>Greg pineapples 3</p>

<p>Oliver rockmellons 2</p>

<p>Betty limes 14</p>

<p>&nbsp;</p>

<p>通过uniq 命令去掉重复行：</p>

<p>&nbsp;</p>

<p>[root@pidora ~]#uniq mysampledata.txt</p>

<p>Fred apples 20</p>

<p>Susy oranges 5</p>

<p>Mark watermellons 12</p>

<p>Robert pears 4</p>

<p>Terry oranges 9</p>

<p>Lisa peaches 7</p>

<p>Susy oranges 12</p>

<p>Mark grapes 39</p>

<p>Anne mangoes 7</p>

<p>Greg pineapples 3</p>

<p>Oliver rockmellons 2</p>

<p>Betty limes 14</p>

<p>&nbsp;
<h1><b>tac过滤器命令</b></h1>
&nbsp;</p>

<p>tac 命令从尾至头的输出我们的输入数据，不得不感叹linux人的创意，tac 命令就是cat 命令的反写，功能也相反。基本使用方式如下：</p>

<p>tac [path]</p>

<p>如：</p>

<p>[root@pidora ~]#tac mysampledata.txt</p>

<p>Betty limes 14</p>

<p>Oliver rockmellons 2</p>

<p>Greg pineapples 3</p>

<p>Anne mangoes 7</p>

<p>Mark grapes 39</p>

<p>Susy oranges 12</p>

<p>Lisa peaches 7</p>

<p>Terry oranges 9</p>

<p>Robert pears 4</p>

<p>Mark watermellons 12</p>

<p>Susy oranges 5</p>

<p>Fred apples 20</p>

<p>&nbsp;</p>
