---
layout: post
title: OpenTTD如何修改车辆参数1-工具
categories:
- 教程
- 游戏
tags:
- NewGRF
- openttd
published: true
comments: true
---
<p><span style="font-weight: 600; color: #555555;"><a class="row-title" style="color: #0074a2;" title="OpenTTD如何修改车辆参数1-工具" href="http://www.itcsl.cn/2014/05/27/openttd%e5%a6%82%e4%bd%95%e4%bf%ae%e6%94%b9%e8%bd%a6%e8%be%86%e5%8f%82%e6%95%b0-1/">OpenTTD如何修改车辆参数1-工具</a></span></p>

<p><span style="font-weight: 600; color: #555555;"><a class="row-title" style="color: #0074a2;" title="OpenTTD如何修改车辆参数2-nfo文件格式" href="http://www.itcsl.cn/2014/05/30/openttd%e5%a6%82%e4%bd%95%e4%bf%ae%e6%94%b9%e8%bd%a6%e8%be%86%e5%8f%82%e6%95%b02-nfo%e6%96%87%e4%bb%b6%e6%a0%bc%e5%bc%8f/">OpenTTD如何修改车辆参数2-nfo文件格式</a></span></p>

<p><span style="font-weight: 600; color: #555555;"><a class="row-title" style="color: #0074a2;" title="OpenTTD如何修改车辆参数3-车辆ID列表" href="http://www.itcsl.cn/2014/05/30/openttd%e5%a6%82%e4%bd%95%e4%bf%ae%e6%94%b9%e8%bd%a6%e8%be%86%e5%8f%82%e6%95%b03-%e8%bd%a6%e8%be%86id%e5%88%97%e8%a1%a8/">OpenTTD如何修改车辆参数3-车辆ID列表</a></span></p>

<p><span style="font-weight: 600; color: #555555;"><a class="row-title" style="color: #0074a2;" title="OpenTTD如何修改车辆参数4-车辆属性列表" href="http://www.itcsl.cn/2014/05/30/openttd%e5%a6%82%e4%bd%95%e4%bf%ae%e6%94%b9%e8%bd%a6%e8%be%86%e5%8f%82%e6%95%b0/">OpenTTD如何修改车辆参数4-车辆属性列表</a></span>
<h1>背景</h1>
<p style="padding-left: 30px;">OpenTTD的扩展性是非常好的，通过NewGRF脚本，我们可以修改游戏中的各种对象（建筑物、运输工具等），本系列教程描述了如何修改车辆的基本参数。仅供抛砖引玉的作用。一个NewGRF脚本是一个后缀为.grf的文件，里面包含了一些图形文件以及一个.nfo文件，本教程以我的车辆修改脚本作为例子，进行讲解。</p></p>

<p><h1>准备</h1>
<p style="padding-left: 30px;">我的车辆修改NewGRF脚本：<a href="http://www.itcsl.cn/2014/05/24/%e5%88%86%e4%ba%ab%e4%b8%80%e4%b8%aaopenttd%e8%bf%90%e8%be%93%e5%a4%a7%e4%ba%a8%e7%9a%84%e8%bd%a6%e8%be%86%e8%a1%a5%e4%b8%81-%e5%a4%a7%e5%ae%b9%e9%87%8f%e9%ab%98%e9%a9%ac%e5%8a%9b/">New_Trains-0.3</a></p>
<p style="padding-left: 30px;">需要的工具：<a href="http://binaries.openttd.org/extra/grfcodec/6.0.4/grfcodec-6.0.4-windows-win32.zip">grfcodec</a></p>
<p style="padding-left: 30px;">下载解压grfcodec，得到一个文件夹，里面包含grfcodec.exe文件，就是我们需要的.grf解包与打包工具。</p>
<p style="padding-left: 30px;">下载我的例子脚本“New_Trains-0.3”，解压后得到一个“New_Trains-0.3”文件夹，其中包含有“NewTrain.grf”脚本文件。</p></p>

<p><h1>解包GRF</h1>
<p style="padding-left: 30px;">首先我们需要把“NewTrain.grf”解包，开始--》运行--》打开cmd命令行，切换到“grfcodec.exe”文件所在目录，使用如下命令进行解包：</p></p>

<p><blockquote style="padding-left: 30px;">
<p style="padding-left: 30px;">grfcodec.exe –d  你的目录/New_Trains-0.3/NewTrain.grf</p>
</blockquote>
<p style="padding-left: 30px;">解包后在“New_Trains-0.3”文件夹下面生成了一个“sprites”文件夹，里面包含有“NewTrain.nfo”、“NewTrain.32.png”，“NewTrain.png”文件。我们不修改车辆图形，只修改参数，所以我们只关注”NewTrain.nfo”文件。</p>
<p style="padding-left: 30px;">用记事本打开”NewTrain.nfo”文件，文件内容如下：</p></p>

<p><blockquote style="padding-left: 30px;">
<p style="padding-left: 30px;">// Automatically generated by GRFCODEC. Do not modify!<br />
// (Info version 32)<br />
// Escapes: 2+ 2- 2&lt; 2&gt; 2u&lt; 2u&gt; 2/ 2% 2u/ 2u% 2* 2&amp; 2| 2^ 2sto = 2s 2rst = 2r 2psto 2ror = 2rot 2cmp 2ucmp 2&lt;&lt; 2u&gt;&gt; 2&gt;&gt;<br />
// Escapes: 71 70 7= 7! 7&lt; 7&gt; 7G 7g 7gG 7GG 7gg 7c 7C<br />
// Escapes: D= = DR D+ = DF D- = DC Du* = DM D* = DnF Du&lt;&lt; = DnC D&lt;&lt; = DO D&amp; D| Du/ D/ Du% D%<br />
// Format: spritenum imagefile depth xpos ypos xsize ysize xrel yrel zoom flags<br />
0 * 4     2F 00 00 00<br />
1 * 6     07 83 01 \7! 00 00<br />
2 * 71     08 06 "MG" 01 09 "NewTrainSet" 00 8A "⌐ 2011 Matthias "<br />
"Gⁿrtler - Licensed under GNU GPL "<br />
"v2" 00<br />
3 * 8     00 00 01 01 00 00 00 00<br />
4 * 8     00 00 01 01 00 09 EF EF<br />
5 * 8     00 00 01 01 00 0B EF EF<br />
6 * 7     00 00 01 01 00 04 FF<br />
7 * 7     00 00 01 01 00 03 FE<br />
8 * 8     00 03 01 01 26 00 00 00<br />
9 * 7     00 03 01 01 26 04 FF<br />
10 * 7     00 03 01 01 26 03 FE<br />
11 * 7     00 03 01 01 26 0C EF<br />
12 * 7     00 03 01 01 26 0D EF<br />
13 * 8     00 03 01 01 26 0F EF EF<br />
14 * 7     00 03 01 01 26 11 EF<br />
15 * 8     00 03 01 01 26 1F 00 00<br />
16 * 8     00 01 01 01 00 00 00 00<br />
17 * 7     00 01 01 01 00 04 FF<br />
18 * 7     00 01 01 01 00 03 FE<br />
19 * 7     00 01 01 01 00 08 EF<br />
20 * 7     00 01 01 01 00 0F EF<br />
21 * 7     00 01 01 01 00 13 EF<br />
22 * 7     00 01 01 01 00 15 EF<br />
23 * 8     00 03 01 01 00 00 00 00<br />
24 * 7     00 03 01 01 00 04 FF<br />
25 * 7     00 03 01 01 00 03 FE<br />
26 * 7     00 03 01 01 00 0C EF<br />
27 * 7     00 03 01 01 00 0D EF<br />
28 * 8     00 03 01 01 00 0F EF EF<br />
29 * 7     00 03 01 01 00 11 EF<br />
30 * 8     00 03 01 01 00 1F 00 00</p>
</blockquote>
<p style="padding-left: 30px;">接下来我将会解释这个文件的格式。</p></p>

<p><h1>打包GRF</h1>
&nbsp;</p>

<p>当”NewTrain.nfo”修改完成之后，通过如下命令进行打包：
<blockquote><span style="font-style: italic; color: #333333;">grfcodec.exe –e   NewTrain.grf  你的目录/New_Trains-0.3/ </span></blockquote></p>
